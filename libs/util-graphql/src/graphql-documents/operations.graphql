query findUser($address: String!) {
  user(address: $address) {
    ...UserFields
  }
}

query allUsers {
  allUsers {
    address
  }
}

fragment UserFields on User {
  address
  totalBalance
  pieVaults {
    symbol
    name
  }
  twentyFourHourChange {
    price
    change
  }
  yieldVaults {
    name
    symbol
    twentyFourHourEarnings
    totalEarnings
    address
  }
  profit
  performance
}

query getProductsBySymbol($symbols: [String!]!, $currency: String!) {
  tokensBySymbol(symbols: $symbols) {
    marketData {
      currentPrice(currency: $currency)
      twentyFourHourChange {
        price
        change
      }
      fromInception
      discount
      interests
      nav
    }
    underlyingTokens {
      name
      symbol
      address
      decimals
      marketData {
        currentPrice(currency: $currency)
        amountPerToken
        totalHeld
        allocation
        twentyFourHourChange {
          price
          change
        }
        marginalTVLPercentage
      }
    }
    symbol
    riskGrade
  }
}

query getVaults($currency: String!) {
  vaults(currency: $currency) {
    underlyingToken {
      marketData {
        currentPrice(currency: $currency)
      }
    }
    symbol
    name
    address
  }
}
